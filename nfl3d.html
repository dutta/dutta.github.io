<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142864443-1"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-142864443-1');
    </script>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="img/logo.png">
	<!-- Author Meta -->
	<meta name="author" content="colorlib">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>Rishav Dutta</title>

	<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700,900" rel="stylesheet">
	<!--
			CSS
			============================================= -->
	<link rel="stylesheet" href="css/linearicons.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	<link rel="stylesheet" href="css/nice-select.css">
	<link rel="stylesheet" href="css/animate.min.css">
	<link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>

	<!-- Start Preloader Area -->
	<div class="preloader-area">
		<div class="loader-box">
			<div class="loader"></div>
		</div>
	</div>
	<!-- End Preloader Area -->


	<!-- Start Header Area -->
	<header id="header">
		<div class="container main-menu">
			<div class="row align-items-center d-flex">
				<!-- <div id="logo">
					<a href="index.html"><img src="img/logo.png" alt="" title="" /></a>
				</div> -->
				<nav id="nav-menu-container">
					<ul class="nav-menu">
                        <!-- <li class=""><a class="active" href="index.html">Home</a></li> -->
                        <li><a href="index.html">Home</a></li>
						<li><a href="index.html#aboutme">About Me</a></li>
						<li><a href="index.html#work">Projects</a></li>
						<li ><a href="index.html#job">Work History</a></li>
						<li ><a href="index.html#edu">Education</a></li>
						<li ><a href="index.html#contact">Contact</a></li>
						
					</ul>
				</nav>
			</div>
		</div>
	</header>
	<!-- End Header Area -->


	<!-- start banner Area -->
	<section class="banner-area2 relative">
		<div class="container">
			<div class="row d-flex align-items-center justify-content-center">
				<div class="about-content col-lg-12">
					<h2 class="text-white">
                        NFL3D:
                    </h2>
                    <h3 class="text-white">
                        Adding the Third Dimension to 2D NFL Tracking Data
                    </h3>
					<p class="link-nav">
						<span class="box">
                            <a href="index.html">Rishav Dutta </a>
                            <a href="http://www.stat.cmu.edu/~ryurko/">Ron Yurko</a>
							<a href="http://www.stat.cmu.edu/people/faculty/sam-ventura">Sam Ventura</a></p>
                        </span>
                    </p>
				</div>
			</div>
		</div>
	</section>
	<!-- End banner Area -->
    <div class = "row">
            <img style="width: 49%" src = "https://github.com/dutta/NFL3D/raw/master/animated_play.gif"></img>
            <img style="width: 49%" src = "https://github.com/dutta/NFL3D/raw/master/static_example.gif"></img>
            
        </div>
	<!-- Portfolio Details Area -->
	<section class="portfolio_details_area section-gap">
		<div class="container">
			<div class="portfolio_details_inner">
				<div class="row">
                        <div class="col-md-5">
                                <div class="portfolio_right_text mt-150">
                                    <h4> Nfl3D </h4>
                                    <p> The work we have done here is to add the z-axis to the motion of a thrown pass, given standard tracking data. </p>
                                    <ul class="list">
                                        <li><span>NGS Data:</span> <a href="https://github.com/asonty/ngs_highlights/">https://github.com/asonty/ngs_highlights/</a></li>
                                        <li><span>Code:</span> <a href="https://github.com/dutta/NFL3D">https://github.com/dutta/NFL3D</a></li>
                                        <li><span>Examples:</span> <a href="https://dutta.shinyapps.io/nfl-3d/">https://dutta.shinyapps.io/nfl-3d/</a></li>
                                        
                                    </ul>
                                </div>
                            </div>
					<div class="col-md-7">
						<div class="left_img">
                            <p>We have created a set of R functions that allow you to add the Z axis to a pass play. Additionally, we have created functions to easily plot the NGS-highlight data </p>

                            <p>Before you can run the code, you need to install a few required libraries </p>
                            <code style = "background-color: #eee; border: 1px solid #999; display: block; padding: 10px;">
                                    install.packages("plotly", "tidyverse", "ggplot2")
                                    </code>
                            <br>
                        
                            <p>Then, we can load the libraries through the source:</p>
                            <code style = "background-color: #eee; border: 1px solid #999; display: block; padding: 10px;">
                                source("https://raw.githubusercontent.com/dutta/NFL3D/master/add_z.R")
                                    source("https://raw.githubusercontent.com/dutta/NFL3D/master/animate_play.R")</code>
                            <br>
                            <p>The following functions are the ones neccessary to see the results:</p>
                            <code style = "background-color: #eee; border: 1px solid #999; display: block; padding: 10px;">
                                add_z_to_play() <br/>
                                three_d_animate() <br/>
                                three_d_animate_static() <br/>
                                get_all_arcs_for_passer() <br/>
                                three_d_all_passes()
                            </code>
                            <br>
						</div>
					</div>
                    
                    
                </div>
                
                <h4>Introduction</h4>
                <br>
                <div class="row">
                    <div class="col-md-12">
                    <p>Currently, NFL publicly available tracking data is presented entirely in 2 dimensions. The <code>x</code> axis (usually 0-120) represents a position between the end zones in yards, and the <code>y</code> axis (usually 0-54 )represents a position between the sidelilnes in yards. We have the position of players on the field throughout the duration of a play. Some animations that are created from such data looks like this: 
                    </p>
                    <img style = "width: 49%; height: 380px;" src='./img/play-497.gif'></img>
                    <img style = "width: 49%; height: 380px;" src='./img/play-502.gif'></img>
                    <img style = "width: 49%; height: 380px;" src='./img/play-499.gif'></img>
                    <img style = "width: 49%; height: 380px;" src='./img/play-503.gif'></img>
                    <p>While informative, we lose some of the nuance of a throw. For example, the play in the bottom left corner above shows a pass to a player who was covered tightly by the defender. What we do not see was the arc of the throw that allowed the pass to avoid the outstreched hands of the defender and drop into the receivers' arms. Similarily, in the top left panel, we see a throw that appears to pass through 3 defenders. What we are unable to see is a perfectly thrown looped pass that was thrown with an arc that would allow the ball to pass over the 3 defenders and exactly into the arms of the receiver but still allowing the catcher to remain in-bounds. </p>

                    <p> Some quarterbacks are better at using the flight of the ball to beat defenders, and we attempt to quantify and understand this by using the 2D data to interpolate the <code>z</code> axis of the position of the ball. In doing so, we can calculate the angle of launch and the true velocity of launch through which we can compare different quarterbacks and their use of flight.</p>            
                    </div>
                </div>

                <h4>Theory</h4>
                <br>
                <div class="row">
                    <div class="col-md-12">
                    <p>Since we currently only have the <code>x,y </code> coordinates of the position of the ball, we will use kinematic equations to interpolate the z-axis. In order to apply the kinematics equations we must first make some assumptions:  
                    </p>
                    <blockquote class = "generic-blockquote">
                    <ol class = "ordered-list">
                        <li> Since we are looking for comparative relationship between quarterbacks, we will assume <code>no air resistance for this first version of NFL3D</code></li>
                        <li> Since quarterbacks can release the ball at different points, and we don't have any information about the release point, we will make an assumption that the ball is <code>released and received at 6ft</code> (in future releases this will be variable). Additionally, we will assume the pass
                        is not tipped or disturbed significantly enough to alter the parabola. The ball goes from the QB's hand to the catcher's hand with nothing in between
                            <ol class = "ordered-list-alpha"> 
                                <li>
                                    <span>The NGS-highlights dataset only has completions and interceptions, and thus we choose to make the arrival point 6ft (2 yards) in the air. With more data, we would treat incompletions differently, we would set the arrival point 
                                    to <code>z = 0</code></span>
                                </li>
                            </ol>

                        </li>
                        
                        <li> With no <code>air resistance</code> the only forces on the ball will be the horizontal gravity force</li>
                    </ol>

                    </blockquote>

                    <p>There are some other forces on the ball. The ball is rotating and there is a drag force from the air resistance. However, these are both hard to account for since the ball isn't always thrown in a spiral
                        and thus understanding the surface area of the ball that is presented is rather complex. Timothy Gay in his book <i>The Physics of Football</i> discusses all 12 axes of forces on the ball, and Watts and Moore in their paper 
                        <i>The Drag Force on an American Football</i> consider the drag force of a standard football <sup>1,2</sup>. 
                        Since we are looking for relative results, we will ignore the rotation and air resistance for this edition of the problem.
                        With the assumptions above, we can begin formulating the problem. Consider the following three figures. </p>
                    <figure>
                            <img style = "width: 51%; display: block; margin-left: auto; margin-right: auto; " src='./img/main.png'></img>
                            <figcaption style = "width: 51%; display: block; margin-left: auto; margin-right: auto;">Figure 1</figcaption>
                    </figure>
                    <img style = "width: 49%; " src='./img/slice.png'></img>
                    <img style = "width: 49%; " src='./img/forces.png'></img>
                    <br><br>
                    <p>From 2D tracking data, the information about the position of the ball is just the launch position and the arrival position. 
                            Using <code>assumption 2</code>, the launch position (all units in yards) is: <code>(x<sub>throw</sub>,y<sub>throw</sub>,2)</code> and the throw happens 
                        at time <code>t<sub>throw</sub></code>. Symmetrically, the arrival position is just <code>(x<sub>ball arrive</sub>,y<sub>ball arrive</sub>,2)</code> and happens 
                        at time <code>t<sub>ball arrive</sub></code>. Figure 1 encapsulates the construction of this problem.</p>
                    <p>Now consider the second figure. In this figure, we have sliced along the black line figure 1. This gives us the flight of the ball through the air is a parabola (from <code>assumption 1 and 3</code> 
                        the only force acting on the ball is gravity). We know the coordinates of the ball at time <code>t<sub>throw</sub></code> is <code>(x<sub>throw</sub>,y<sub>throw</sub>,2)</code> 
                        and at time  <code>t<sub>ball arrive</sub></code> is <code>(x<sub>ball arrive</sub>,y<sub>ball arrive</sub>,2)</code>. From projectile motion, we know that the horizontal component
                        and the vertical component are independent with regards to speed. Since we know the x and y coordinates of the ball at specific times, we can calculate the velocity along the ground 
                        <code>V<sub>xy</sub> </code>:</p> 
                        <blockquote class = "generic-blockquote">
                                <b>Equation 1:</b>
                                Given the <code>t<sub>throw</sub></code> and <code>t<sub>ball arrive</sub></code> points of the ball, <code>(x<sub>throw</sub>,y<sub>throw</sub>,2)</code> and <code>(x<sub>ball arrive</sub>,y<sub>ball arrive</sub>,2)</code>
                                
                                \[V_{xy} = \sqrt{(x_{ball arrive} - x_{throw})^2 + (y_{ball arrive} - y_{throw})^2 \over (t_{ball arrive} - t_{throw})}\]
                        </blockquote>
                    <p> Upon release, the ball has velocities in the directions as described by the third figure. Our goal is to find the <code>z</code> value at any given timestamp during the 
                    duration of the throw. Since we know how long the ball is in the air, we can apply the following equation for the position of the ball:</p>
                    <blockquote class = "generic-blockquote">
                            <b>Equation 2:</b>
                            \[\Delta z = V_{z}  t - {1 \over 2}gt^2\]
                            Where \(\Delta z\) is the displacement from the initial <code>z</code> position and \(V_{z}\) is the initial velocity in the <code>z</code> direction.
                    </blockquote>
                    From <code>assumption 2</code> we see that the arrival position and the throw position are the same with respect to the <code>z</code> axis. Thus we can set this
                    value to 0. Then we can rearrange the equation to calculate the velocity in the <code>z</code>, <code>V<sub>0z</sub></code> : 
                    
                    <blockquote class = "generic-blockquote">
                            <b>Equation 3:</b>
                            \[V_{z} = {tg \over 2}\]
                    </blockquote>
                    
                    Now that we have the velocity in the <code>z</code> direction, we can use the final kinematics equation to find the <code>z</code> value at any time <code>t<sub>s</sub></code> :
                    <blockquote class = "generic-blockquote">
                            <b>Equation 4:</b>
                            \[z = z_0 + V_{z}  t - {1 \over 2} gt_s^2\] 
                            More specifically in this case, since we know the initial \(z\) position:
                            \[z = 2 + V_{z}  t - {1 \over 2} gt_s^2\] 
                    </blockquote>

                    Finally, since we have equations for <code>V<sub>xy</sub></code>, <code>V<sub>z</sub></code> we can also calculate the launch velocity and launch angle using the following equations using the velocity relationship in figure 3:
                    <blockquote class = "generic-blockquote">
                            <b>Equation 5a:</b> Initial Launch Velocity
                            \[V = \sqrt {V_{z}^2 + V_{xy}^2} \]
                            <br>
                    </blockquote>

                    <blockquote class = "generic-blockquote">
                            <b>Equation 5b:</b> Initial Launch Angle
                            \[\theta = \tan^{-1}({V_z \over V_{xy}}) \]
                    </blockquote>

                    </div>
                </div>


                <h4>Results</h4>
                <br>
                <div class="row">
                    <div class="col-md-12">
                     <p> Let us take a look back at the plays in the introduction. With the added <code>z</code> axis we can see 
                        the arc of the throws: </p>
                        <div class = "row">
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/play-497.gif'></img></div>
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/490.gif'></img></div>
                        </div>
                        <div class = "row">
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/play-502.gif'></img></div>
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/491.gif'></img></div>
                        </div>
                        <div class = "row">
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/play-499.gif'></img></div>
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/499.gif'></img></div>
                        </div>
                        <div class = "row">
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/play-503.gif'></img></div>
                                <div class="col-md-6"><img style = "width: 100%; " src='./img/503.gif'></img></div>
                        </div>
                        <blockquote class = "generic-blockquote">
                                We would like to emphasize that the dataset used was the NGS-highlight dataset and thus is highly skewed. Since these are highlight plays, many of these examples are deep passes, interceptions, and touchdowns.
                                There are only a few passes that actually represent "the average" pass a quarterback would make. 
                        </blockquote>

                        <p> We can see how many of these passes have large arcs in their passes in order to account for different defenses. Now let us look at the different launch velocities and throwing 
                            angles for different quarterbacks. </p>
                            
                        <img style = "width: 88%; display: block; margin-left: auto; margin-right: auto;" src='./img/matrix.jpg'></img>
                        <br>
                        <p> We can see on average that Russell Wilson, who is the passer in all of the examples above, has a much higher launch angle than Patrick Mahomes and Drew Brees, and all three of them have similar 
                            average velocities. On the other hand we see that Jimmy Garoppolo has a relatively small launch angle and launch velocity on average. Josh Allen, vaunted for his arm strength, is among the top quarterbacks
                        in terms of launch angle and velocity, further vindicating such praise. Now let us look at the max velocity by quarterbacks who have more than 5 highlight plays:</p>

                        <img style = "width: 88%; display: block; margin-left: auto; margin-right: auto; " src='./img/max_vel.jpg'></img>
                        <br>
                        <p> Patrick Mahomes far and away has the fastest pass in the NGS-highlight dataset. Josh Allen also has a pass in the top few of quarterbacks. Russell Wilson's fastest pass is toward the middle of the pack. Hence, let us look 
                            at the distribution of launch angle and launch velocity:</p>

                        <img style = "width: 88%; display: block; margin-left: auto; margin-right: auto; " src='./img/wilson2.png'></img>
                        <br>
                        <p>We can see from the distribution that Russell Wilson generally has passes with a launch angle above 30 degrees. Further, we see that his launch velocity is very close to a standard normal
                            around 44-45 mph. Now let us compare Wilson with the 11 other top QBs in terms of the distributions of launch angle and velocity.</p>
                        <img style = "width: 88%; display: block; margin-left: auto; margin-right: auto;" src='./img/ridgeplot.jpg'></img>
                        <br>
                        <img style = "width: 88%; display: block; margin-left: auto; margin-right: auto; " src='./img/ridgeplotangle.jpg'></img>
                        <br>
                        <p>These are just some of the examples of the anlysis that can be done with these added values.</p>
                    </div>
                </div>

                <h4>Discussion and Future Work</h4>
                <br>
                <div class="row">
                    <div class="col-md-12">
                     <p> The work we have presented here allows us to add the <code>z</code> axis to standard 2D tracking data. In doing this work, we are able to extract the ball position, launch angle, and launch velocity. Since the dataset 
                    is skewed and rather small, the scope of the work done here is limited. However, this work shows promise and with a larger dataset we would be able to perform more complex analysis. </p>
                    <p> For example, given a larger dataset, we could extend the problem to look at players who are more capable of throwing high velocity passes. For instance, are players who throw a higher average velocity able to complepte
                        passes with a lower probability of completion? Or does the force neccessary to throw the pass inherently make the pass less accurate? We can ask the same questions about launch angle. Do the players who throw at a lower launch
                        angle e.g. Jimmy Garoppolo complete more difficult passes or do the players who throw at a higher angle e.g. Russell Wilson or Kyler Murray complete the more difficult passes. Obviously we are unable to perform this analysis because
                        our data does not contain any true incompletions, but with a standard season worth of data we would be able to understand how launch angle and velocity impact completions. 
                    </p>
                    <p>Another analysis that could be performed would be how well WRs or DBs track the ball in the air depending on the arc of the ball or the speed of the pass. We could start to see how players have to slow down or speed up in reaction
                    to the pass. This could be compounded with how different quarterbacks throw into different defensive types. Does man coverage mean QBs have to throw with a higher arc or do certain zone coverages induce a smaller arc with a higher pass? 
                    We can start to see how quarterbacks adapt to different pass defenses with their throws, and try and understand how defenses can better approach different quarterback throwing styles. 
                    </p>
                    <p>
                        With additional data we would be able to start to tackle some of these more complicated questions. 
                    </p>
                    </div>
                </div>

                <h4>References</h4>
                <br>
                <div class="row">
                        <div class="col-md-12">
                    <p><sup>1</sup><i>The Physics of Football</i> - Timothy Gay</p>
                    <p><sup>2</sup><i>The drag force on an American Football</i> - Robert G. Watts and Gary Moore http://users.df.uba.ar/sgil/physics_paper_doc/papers_phys/fluids/drag_football.pdf</p>
                        </div>
                </div>

			</div>
		</div>
	</section>
	<!-- End Portfolio Details Area -->



	<!-- ####################### Start Scroll to Top Area ####################### -->
	<div id="back-top">
		<a title="Go to Top" href="#">
			<i class="lnr lnr-arrow-up"></i>
		</a>
	</div>
	<!-- ####################### End Scroll to Top Area ####################### -->

	<script src="js/vendor/jquery-2.2.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	 crossorigin="anonymous"></script>
	<script src="js/vendor/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhOdIF3Y9382fqJYt5I_sswSrEw5eihAA"></script>
	<script src="js/easing.min.js"></script>
	<script src="js/hoverIntent.js"></script>
	<script src="js/superfish.min.js"></script>
	<script src="js/mn-accordion.js"></script>
	<script src="js/jquery.ajaxchimp.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.nice-select.min.js"></script>
	<script src="js/isotope.pkgd.min.js"></script>
	<script src="js/jquery.circlechart.js"></script>
	<script src="js/mail-script.js"></script>
	<script src="js/wow.min.js"></script>
	<script src="js/main.js"></script>
</body>

</html>